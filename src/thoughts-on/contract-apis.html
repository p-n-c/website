<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Thoughts on contract apis" />
    <link rel="stylesheet" href="/src/styles/common.css" />
    <title>Contract APIs</title>
  </head>
  <body class="body">
    <header>
      <h1>Contract APIs</h1>
      <p>
        A contract embraces what an entity is and does. Similar to a
        constitution but expressed in the style of an API. Hence, contract API.
      </p>
      <p>
        In this article, we are imagining a contract in the context of a web app
        which multiple external interests (LLM agents) want to cannibalise.
      </p>
      <p>
        <em>
          There are also reasons to
          <a href="/src/how-to/break-down-monolithic-apps.html"
            >breakdown a monolithic app</a
          >
          for internal reasons.
        </em>
      </p>
    </header>
    <main class="main">
      <article>
        <section aria-labelledby="the-value-of-contract-apis">
          <h2 id="the-value-of-contract-apis">The value of contract APIs</h2>
          <p>
            LLMs need data to act upon, and data must be secure. LLMs cannot be
            given unfettered access to databases or have knowledge of their
            internal schema.
          </p>
          <p>
            APIs provide a controlled and safe way to access to data whilst
            preserving company privacy and honouring data protection issues.
          </p>
          <p>
            APIs can be the mechanism by which teams adapt to change on (some
            of) their terms.
          </p>
          <p>A contract API works on the same principles as an API.</p>
          <section aria-labelledby="internal-value-of-contract-apis">
            <h3 id="internal-value-of-contract-apis">
              Internal value of contract APIs
            </h3>

            <p>A contract API is the single source of truth:</p>
            <ul>
              <li>From which the API is derived</li>
              <li>From which the database scheme is derived</li>
              <li>
                Which front and backend developers use as the contract in
                contract-first development whilst iterating on the API
              </li>
              <li>Is the reference for front and backend tests</li>
            </ul>
            <p>Additionally it is:</p>
            <ul>
              <li>The source of tariffs and pricing details</li>
              <li>
                The home for business rules and statements pertaining to ethics,
                sustainability and accessibility
              </li>
              <li>
                A liaison with other systems e.g. bug tracking and source
                control
              </li>
            </ul>
          </section>
          <section aria-labelledby="external-value-of-contract-apis">
            <h3 id="external-value-of-contract-apis">
              External value of contract APIs
            </h3>
            <p>
              Since a contract API extends beyond the conventional remit of an
              API, it is attractive to LLMs which are gluttons for data.
            </p>
            <ul>
              <li>Watermarks, trademarks and copyright</li>
              <li>Design hints and solutions</li>
              <li>Information pertaining to the quality of the data</li>
              <li>
                Information pertaining to how the data were derived and by whom
              </li>
              <li>Teasers, promotions, links and inducements</li>
            </ul>
            <p>
              The contract API is an opportunity for web development teams to
              articulate different modes of presentation and to take the lead on
              how their data should be used, explored and processed.
            </p>
            <p>
              <em>
                APIs are typically defined by a schema but endpoints and
                examples are probably enough for LLMs to work out what to do.
                Which is good news for web development teams because schema are
                not trivial.
              </em>
            </p>
          </section>
          <section aria-labelledby="contract-api-setup">
            <h3 id="contract-api-setup">Setting up a contract API</h3>
            <section aria-labelledby="existing-teams">
              <h4 id="existing-teams">Existing teams</h4>
              <ul>
                <li>Create an API if there isn't one</li>
                <li>
                  Internal benefits
                  <ul>
                    <li>
                      Single source of truth in contract-first development
                    </li>
                    <li>Single source of truth for front and backend tests</li>
                  </ul>
                </li>
                <li>
                  A starting point for 'competing' interfaces including those
                  created by LLMs
                </li>
              </ul>
            </section>
            <section aria-labelledby="new-teams">
              <h4 id="new-teams">New teams</h4>
              <p>New teams can adopt new structures and roles.</p>
              <ul>
                <li>Create the single source of truth API contract</li>
                <li>
                  Create new structures and roles based on new requirements
                </li>
              </ul>
              <p>
                <em
                  >Having an API makes sense even if you don't convert it into a
                  contract API.</em
                >
              </p>
            </section>
            <section aria-labelledby="converting-an-api-into-a-contract-api">
              <h3 id="converting-an-api-into-a-contract-api">
                Converting an API into a contract API
              </h3>
              <p>
                An API is-a contract API. You don't have to change anything. But
                you might want to so that the world knows more about you.
              </p>
              <p>
                It's a good way to document (in a serious, maintainable way) how
                the different parts of your entity work. This will help them
                better communicate with one another.
              </p>
              <p>
                It can also be used to support non-technical parts of the
                entity.
              </p>
              <section aria-labelledby="sales-deck">
                <h4 id="sales-deck">The sales deck</h4>
                <p>
                  To create, for example, a sales pitch or deck. A good use case
                  for an LLM.
                </p>
                <p>
                  Given a clear brief, it can extract information from several
                  parts of the contract API so that the sales team is clear what
                  services they are selling.
                </p>
                <ul>
                  <li>
                    The data part of the contract API has endpoints which
                    explicitly state what can be done (which services can be
                    offered).
                  </li>
                  <li>
                    Employee biographies, repositories and bug tracking tools
                    can be parsed to work out what is achievable (which promises
                    can be met).
                  </li>
                  <li>
                    Example or prior contracts can be used as templates for
                    future deals.
                  </li>
                </ul>
              </section>
            </section>
          </section>
          <section aria-labelledby="pros-and-cons-of-contract-apis">
            <h3 id="pros-and-cons-of-contract-apis">
              Pros and cons of contract APIs
            </h3>
            <section aria-labelledby="pros">
              <h4 id="pros">Pros</h4>
              <ul>
                <li>
                  Teams prepare for inevitable change (even though the nature of
                  the change is uncertain)
                </li>
                <li>
                  They retain knowledge by adaptation, creating teams that are
                  better suited to ecosystems in which LLMs are prevalent.
                </li>
              </ul>
            </section>
            <section aria-labelledby="cons">
              <h4 id="cons">Cons</h4>
              <ul>
                <li>
                  APIs 'hijacked' by LLMs interact directly with APIs on behalf
                  of end users (other companies, individuals)
                </li>
                <li>Maintenance of the contract</li>
                <li>Loss of detail</li>
                <li>Black box/es</li>
                <li>Loss of jobs</li>
                <li>Loss of knowledge and broader understanding</li>
                <li>Generic approaches</li>
                <li>
                  Loss of 'new' ideas and approaches; evolutionary stagnation
                </li>
              </ul>
            </section>
            <p>
              We've added a lot of cons. That's sensible. This is a sketchy,
              unproven idea. But creating dependencies on LLMs is riskier. They
              should not be used to insulate or be allowed to infest every part
              of our work and our lives.
            </p>
          </section>
        </section>
        <section aria-labelledby="conclusion">
          <h2 id="conclusion">Conclusion</h2>
          <p>
            For once the most sustainable approach might be to treat a resource
            as disposable. Use LLMs but always be ready to throw them away.
          </p>
        </section>
      </article>
      <hr />
      <p>
        <em
          >This article was finished on 20th December 2024 and published shortly
          after.</em
        >
      </p>
      <hr />
      <aside>
        <h3>
          Development approaches that shared characteristics with contract APIs
        </h3>
        <ul>
          <li>
            <a
              href="https://medium.com/@harutyunabgaryann/the-api-contract-bridging-the-gap-between-backend-and-frontend-development-3074effc642b"
              >Contract-First Development</a
            >
          </li>
          <li><a href="https://mswjs.io/">API mocking for JavaScript</a></li>
          <li>
            <a href="https://swagger.io/specification/"
              >OpenAPI Specification</a
            >
          </li>
          <li>Domain-Driven Design</li>
        </ul>
      </aside>
      <hr />
      <section aria-labelledby="references">
        <h2 id="references">References</h2>
        <ul>
          <li>
            <a
              href="https://apidesignmatters.substack.com/p/your-guide-to-the-language-of-api-design"
              >API Design Matters: Your Guide to The Language of API Design |
              David Biesack</a
            >
          </li>
        </ul>
      </section>
    </main>
    <footer>
      <nav aria-label="Primary">
        <a class="local" href="/src/sitemap.html">Contents</a>
      </nav>
    </footer>
  </body>
</html>
